#!/bin/bash
# consolidate-code.sh
# Consolide et documente la nouvelle interface utilisateur

echo "=== Interface Utilisateur - Documentation ==="
echo ""
echo "L'interface utilisateur a été reconstruite en respectant l'architecture ECS pure."
echo ""
echo "## Structure"
echo "- HTML (index.html): Contient les éléments DOM (sliders, boutons, panneaux)"
echo "- UIComponent (InputComponent): Stocke l'état des contrôles"
echo "- UISystem: Gère la logique de l'interface (événements DOM, mises à jour)"
echo "- UIConfig: Contient les valeurs par défaut et les plages de contrôle"
echo ""
echo "## Groupes de contrôles"
echo "1. Vent: vitesse, direction, turbulence"
echo "2. Lignes & Brides: longueur des lignes, 3 brides (nez, inter, centre)"
echo "3. Physique: amortissement linéaire, amortissement angulaire, subdivision maillage"
echo "4. Aérodynamique: échelle portance, échelle traînée, lissage des forces"
echo "5. Boutons: Play/Pause, Reset, Debug"
echo ""
echo "## Flux de données"
echo "1. Utilisateur interagit avec un slider/bouton"
echo "2. UISystem met à jour InputComponent"
echo "3. D'autres systèmes (WindSystem, ConstraintSystem, etc.) lisent InputComponent"
echo "4. Simulation est modifiée en fonction des nouvelles valeurs"
echo "5. UISystem met à jour l'affichage (vitesse, altitude, etc.)"
echo ""
echo "## Intégration avec les autres systèmes"
echo ""
echo "Les systèmes suivants DOIVENT lire les valeurs de InputComponent:"
echo "- WindSystem: windSpeed, windDirection, windTurbulence"
echo "- ConstraintSystem: lineLength, bridleNez, bridleInter, bridleCentre"
echo "- PhysicsSystem: linearDamping, angularDamping"
echo "- AeroSystem: liftScale, dragScale, forceSmoothing"
echo ""
echo "Exemple pour WindSystem:"
echo "  const input = entityManager.query(['Input'])[0]?.getComponent<InputComponent>('Input');"
echo "  if (input) {"
echo "    this.windSpeed = input.windSpeed; // Utiliser la valeur contrôlée par l'UI"
echo "  }"
echo ""
echo "=== Documentation complète ==="
