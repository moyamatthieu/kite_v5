# ğŸ“Š AUDIT VISUEL - MAIN vs FEATURE

## ğŸ“ˆ MÃ‰TRIQUES COMPARATIVES

### Lignes de code
```
MAIN (OOP):     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 10,088 lignes
FEATURE (ECS):  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 21,230 lignes (+110%)
```

### Nombre de fichiers
```
MAIN (OOP):     â–ˆâ–ˆâ–ˆâ–ˆ 41 fichiers
FEATURE (ECS):  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 133 fichiers (+225%)
```

### Commits divergents
```
MAIN:           â”€ 0 (baseline)
FEATURE:        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 157 commits
```

---

## ğŸ—ï¸ ARCHITECTURE COMPARÃ‰E

### MAIN (OOP - Vertical Integration)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SimulationApp.ts            â”‚
â”‚         (Orchestrateur)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚  Kite  â”‚â—„â”€â”€â”€â”€â”€â”¤Controllerâ”‚
â”‚(Object)â”‚      â”‚ (Logic)  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚                â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚   PhysicsEngine          â”‚
â”‚   (Simulation)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CaractÃ©ristiques:
â€¢ HÃ©ritage: Node3D â†’ Primitive â†’ StructuredObject â†’ Kite
â€¢ Ã‰tat: EncapsulÃ© dans objets
â€¢ Logique: Controllers + Engine
```

### FEATURE (ECS - Horizontal Composition)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EntityManager                          â”‚
â”‚  (Conteneur d'Entities avec Components)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Entities    â”‚
    â”‚  (Kite, Bar,  â”‚
    â”‚   Lines, etc) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Components (Data)          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Transformâ”‚ Physics  â”‚Geometryâ”‚ â”‚
â”‚ â”‚  Line   â”‚   Aero   â”‚  Mesh  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Systems (Logic)            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Aero   â”‚Constraintâ”‚Physics â”‚ â”‚
â”‚ â”‚ Render  â”‚  Input   â”‚  Wind  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CaractÃ©ristiques:
â€¢ Composition: Entities = Î£ Components
â€¢ Ã‰tat: Components (pure data)
â€¢ Logique: Systems (pure logic)
```

---

## ğŸ¯ SCORES COMPARATIFS

### TestabilitÃ©
```
MAIN:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60% (dÃ©pendances lourdes)
FEATURE:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (isolation parfaite)
```

### MaintenabilitÃ©
```
MAIN:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 70% (couplage moyen)
FEATURE:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (dÃ©couplage fort)
```

### Performance
```
MAIN:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (natif Three.js)
FEATURE:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85% (overhead queries)
```

### Ã‰volutivitÃ©
```
MAIN:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60% (architecture rigide)
FEATURE:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (modulaire)
```

### FidÃ©litÃ© Physique
```
MAIN:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (bridles + collision)
FEATURE:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85% (manque bridles)
```

### Documentation
```
MAIN:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85% (7 docs)
FEATURE:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (13 docs)
```

---

## ğŸ”¬ SYSTÃˆMES DE CONTRAINTES

### Algorithme PBD (identique)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Calcul violation contrainte    â”‚
â”‚     C = distance - restLength       â”‚
â”‚                                     â”‚
â”‚  2. Facteur correction Î»            â”‚
â”‚     Î» = C / (1/m + rÂ²/I)           â”‚
â”‚                                     â”‚
â”‚  3. Correction position             â”‚
â”‚     Î”P = -Î» Ã— n / m                â”‚
â”‚                                     â”‚
â”‚  4. Correction rotation             â”‚
â”‚     Î”Î¸ = -Î» Ã— (r Ã— n) / I          â”‚
â”‚                                     â”‚
â”‚  5. Correction vitesse              â”‚
â”‚     if v_radial > 0: annuler       â”‚
â”‚                                     â”‚
â”‚  6. ItÃ©ration Ã— 2 passes            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ImplÃ©mentations
```
MAIN (ConstraintSolver.ts):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… 2 lignes principales        â”‚
â”‚ âœ… 6 bridles (nez/inter/centre)â”‚
â”‚ âœ… Collision sol + friction    â”‚
â”‚ âš ï¸  CouplÃ© Ã  classe Kite       â”‚
â”‚ ğŸ“Š 356 lignes                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FEATURE (ConstraintSystem.ts):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… 2 lignes principales        â”‚
â”‚ âŒ Bridles ABSENTES (TODO)     â”‚
â”‚ âš ï¸  Collision sol simple       â”‚
â”‚ âœ… DÃ©couplÃ© (components)       â”‚
â”‚ ğŸ“Š 189 lignes (-47%)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Ã‰VOLUTION TEMPORELLE

### Commits par branche
```
MAIN (baseline):
Oct 20 â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º (stable)
        f9686c1 (reorganize)

FEATURE (dÃ©veloppement actif):
Oct 20 â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â—â”€â–º (157 commits)
        â””â”€â”¬â”€â”˜ â””â”€â”¬â”€â”˜ â””â”€â”¬â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜
          â”‚     â”‚     â”‚      â”‚
        PBD   Fix  Consolidation
        impl  bugs  docs      Latest
```

---

## ğŸ® SCÃ‰NARIOS D'Ã‰VOLUTION

### Ajout Multi-kites
```
MAIN (OOP):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KiteController (singleton)      â”‚
â”‚   âš ï¸  Refactor majeur requis    â”‚
â”‚   - CrÃ©er tableau de kites      â”‚
â”‚   - Boucler manuellement         â”‚
â”‚   - GÃ©rer collisions kite-kite  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FEATURE (ECS):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Systems (dÃ©couplÃ©s)             â”‚
â”‚   âœ… AUCUN changement !         â”‚
â”‚   - query(['kite'])              â”‚
â”‚   - Boucle automatique           â”‚
â”‚   - Collisions auto-dÃ©tectÃ©es    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ajout Networking
```
MAIN (OOP):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰tat distribuÃ©                  â”‚
â”‚   âŒ TrÃ¨s difficile              â”‚
â”‚   - Ã‰tat dans 10+ classes        â”‚
â”‚   - SÃ©rialisation manuelle       â”‚
â”‚   - Synchronisation complexe     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FEATURE (ECS):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰tat centralisÃ©                 â”‚
â”‚   âœ… Facile                     â”‚
â”‚   - Components = JSON            â”‚
â”‚   - Snapshot automatique         â”‚
â”‚   - Sync triviale                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° DETTE TECHNIQUE

### MAIN
```
Couplage:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ Fort
Ã‰tat mutÃ©:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ Ã‰levÃ©
Duplication: â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Faible
Abstractions:â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Natives

Dette globale: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ Moyenne
```

### FEATURE
```
Couplage:    â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Faible
Ã‰tat mutÃ©:   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Nul
Duplication: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ ModÃ©rÃ©e
Abstractions:â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ Custom

Dette globale: â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ Faible
```

---

## ğŸ† VERDICT FINAL

### Score global
```
           MAIN  FEATURE
           â”€â”€â”¬â”€  â”€â”€â”¬â”€â”€
TestabilitÃ©   â”‚    âœ…
MaintenabilitÃ©â”‚    âœ…
Performance  âœ…     â”‚
Ã‰volutivitÃ©   â”‚    âœ…
Physique     âœ…     â”‚
DÃ©bogage      â”‚    âœ…
Docs          â”‚    âœ…
Courbe app.  âœ…     â”‚
           â”€â”€â”´â”€  â”€â”€â”´â”€â”€
Total:        4     6
```

### Recommandation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FEATURE pour PRODUCTION           â”‚
â”‚  + Porter bridles de MAIN          â”‚
â”‚  + Optimiser queries               â”‚
â”‚  + Tests performance               â”‚
â”‚                                    â”‚
â”‚  MAIN comme RÃ‰FÃ‰RENCE PHYSIQUE     â”‚
â”‚  (ne plus dÃ©velopper)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… ROADMAP SUGGÃ‰RÃ‰E

```
Semaine 1-2:  Porter bridles MAIN â†’ FEATURE
              â”‚
              â–¼
Semaine 3-4:  Tests comparatifs + benchmarks
              â”‚
              â–¼
Mois 2:       Optimisations ECS (caching)
              â”‚
              â–¼
Mois 3-6:     Nouvelles features sur FEATURE
              â”‚
              â–¼
Long terme:   Archiver MAIN (rÃ©fÃ©rence historique)
```

---

**Rapport gÃ©nÃ©rÃ©:** 27 octobre 2025  
**Prochaine rÃ©vision:** AprÃ¨s portage bridles
